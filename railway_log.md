2025-10-20T14:35:32.000000000Z [inf]  Starting Container
2025-10-20T14:35:33.672911931Z [inf]  ========================================
2025-10-20T14:35:33.672921289Z [inf]  🚀 Mizan Server Process Starting...
2025-10-20T14:35:33.672928294Z [inf]  📅 Timestamp: 2025-10-20T14:35:32.975Z
2025-10-20T14:35:33.672935140Z [inf]  🌍 Node Version: v20.19.5
2025-10-20T14:35:33.672943476Z [inf]  📦 Environment: production
2025-10-20T14:35:33.672948892Z [inf]  🔄 Deployment Version: 7df2998 - Enhanced error logging
2025-10-20T14:35:33.672953759Z [inf]  ========================================
2025-10-20T14:35:33.672958591Z [inf]  ⚙️  Environment variables ready (injected by platform)
2025-10-20T14:35:33.672963026Z [inf]  📊 Environment Check:
2025-10-20T14:35:33.672968175Z [inf]    - PORT: 8080
2025-10-20T14:35:33.672973000Z [inf]    - DATABASE_URL: ✅ SET
2025-10-20T14:35:33.672979355Z [inf]    - SESSION_SECRET: ⚠️  NOT SET
2025-10-20T14:35:33.672983532Z [inf]    - JWT_SECRET: ✅ SET
2025-10-20T14:35:33.672987616Z [inf]  📚 Loading database module...
2025-10-20T14:35:33.672991681Z [inf]  ✅ Database module loaded
2025-10-20T14:35:33.672997043Z [inf]  💡 Configured Port: 8080
2025-10-20T14:35:33.673001853Z [inf]  💡 Configured Host: 0.0.0.0
2025-10-20T14:35:33.673006225Z [inf]  🌐 CORS configured with dynamic origin checking
2025-10-20T14:35:33.673011289Z [inf]  ✅ Allowed origins (static): [
2025-10-20T14:35:33.673016166Z [inf]    'http://localhost:3000',
2025-10-20T14:35:33.673021442Z [inf]    'http://localhost:3001',
2025-10-20T14:35:33.673028120Z [inf]    'https://mizan.work',
2025-10-20T14:35:33.673033092Z [inf]    'https://www.mizan.work',
2025-10-20T14:35:33.673037563Z [inf]    'https://api.mizan.work',
2025-10-20T14:35:33.673042469Z [inf]    'https://mizan-platform-final.vercel.app',
2025-10-20T14:35:33.673047362Z [inf]    'https://mizan-frontend-ten.vercel.app',
2025-10-20T14:35:33.673051808Z [inf]    'https://mizan-api.railway.app'
2025-10-20T14:35:33.673832811Z [inf]  ]
2025-10-20T14:35:33.673839665Z [inf]  ✅ Dynamic patterns: *.vercel.app, *.railway.app
2025-10-20T14:35:33.673844913Z [inf]  🔧 CLIENT_URL environment variable: https://mizan.work
2025-10-20T14:35:33.673850861Z [inf]  🔧 FRONTEND_URL environment variable: https://mizan.work
2025-10-20T14:35:33.673856746Z [inf]  🎬 Invoking startServer() function...
2025-10-20T14:35:33.673862880Z [inf]  
2025-10-20T14:35:33.673868819Z [inf]  ═══════════════════════════════════════════════════════════
2025-10-20T14:35:33.673876423Z [inf]  🚀 STARTING MIZAN PLATFORM SERVER v2.0.0
2025-10-20T14:35:33.673882616Z [inf]  ═══════════════════════════════════════════════════════════
2025-10-20T14:35:33.673892660Z [inf]  📍 Environment: production
2025-10-20T14:35:33.673899335Z [inf]  🔌 Port: 8080
2025-10-20T14:35:33.673905239Z [inf]  🖥️  Host: 0.0.0.0
2025-10-20T14:35:33.673910782Z [inf]  
2025-10-20T14:35:33.673916346Z [inf]  🔐 Security Configuration:
2025-10-20T14:35:33.673930883Z [inf]    ✅ DATABASE_URL is configured
2025-10-20T14:35:33.673936546Z [inf]    ✅ JWT/SESSION_SECRET is configured
2025-10-20T14:35:33.673942392Z [inf]  
2025-10-20T14:35:33.673949238Z [inf]  🌐 Starting HTTP server...
2025-10-20T14:35:33.673957134Z [inf]     Binding to: 0.0.0.0:8080
2025-10-20T14:35:33.673963691Z [inf]  🔍 Database connection attempt 1/2...
2025-10-20T14:35:33.673969470Z [inf]  🔍 Testing database connection...
2025-10-20T14:35:33.673983047Z [inf]  
2025-10-20T14:35:33.673988995Z [inf]  ═══════════════════════════════════════════════════════════
2025-10-20T14:35:33.674696713Z [inf]  ✅ MIZAN PLATFORM SERVER ONLINE
2025-10-20T14:35:33.674701885Z [inf]  ═══════════════════════════════════════════════════════════
2025-10-20T14:35:33.674709217Z [inf]  🌐 Server: http://0.0.0.0:8080
2025-10-20T14:35:33.674715819Z [inf]  🏥 Health: http://0.0.0.0:8080/health
2025-10-20T14:35:33.674722191Z [inf]  📊 Features: Three-Engine AI, Multi-Provider Consensus
2025-10-20T14:35:33.674733353Z [inf]  🔒 Security: CORS, Helmet, Rate Limiting
2025-10-20T14:35:33.674739718Z [inf]  🗄️  Database: Testing connection in background...
2025-10-20T14:35:33.674745685Z [inf]  ═══════════════════════════════════════════════════════════
2025-10-20T14:35:33.674752686Z [inf]  
2025-10-20T14:35:33.674759717Z [inf]  ✅ startServer() invocation completed successfully
2025-10-20T14:35:33.721928578Z [inf]  ✅ Database connection established
2025-10-20T14:35:33.724003578Z [inf]  ✅ Database connection established
2025-10-20T14:35:33.725953795Z [inf]  ✅ Database connection successful
2025-10-20T14:35:33.725959842Z [inf]  ✅ Database fully connected and operational
2025-10-20T14:35:33.731695774Z [inf]  ✅ Database connection validated successfully
2025-10-20T14:35:34.138858914Z [inf]  🏥 Health check requested. Reporting current status:
2025-10-20T14:35:34.138867432Z [inf]    - Server Status: running
2025-10-20T14:35:34.138873503Z [inf]    - Database Status: connected
2025-10-20T14:35:34.138879921Z [inf]    - DATABASE_URL: Set (hidden)
2025-10-20T14:36:04.212620091Z [inf]  📤 Database connection removed from pool
2025-10-20T14:36:04.212630156Z [inf]  📤 Database connection removed from pool
2025-10-20T14:36:34.211637721Z [inf]  📥 [Request] {
2025-10-20T14:36:34.211648275Z [inf]    method: 'GET',
2025-10-20T14:36:34.211654494Z [inf]    path: '/api/superadmin/tenants',
2025-10-20T14:36:34.211660794Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:36:34.211666743Z [inf]    hasAuth: true,
2025-10-20T14:36:34.211672183Z [inf]    contentType: 'application/json'
2025-10-20T14:36:34.211678182Z [inf]  }
2025-10-20T14:36:34.211683692Z [inf]  ✅ Database connection established
2025-10-20T14:36:34.211688080Z [inf]  Fetching tenants for user: a8b36994-723d-45b8-a5bc-d7eea4f2bc18
2025-10-20T14:36:34.211692870Z [inf]  Database connection verified for tenants
2025-10-20T14:36:34.211698797Z [inf]  Fetched tenants: 3
2025-10-20T14:36:34.211704736Z [inf]  ✅ Converted tenant ID: "superadmin-tenant" -> 1 (type: number)
2025-10-20T14:36:34.211710848Z [inf]  ✅ Database connection established
2025-10-20T14:36:34.211716402Z [inf]  ✅ Converted tenant ID: "1ce32fe3-6788-44e9-82c5-fb799a0501ab" -> 484650980 (type: number)
2025-10-20T14:36:34.211721894Z [inf]  ✅ Database connection established
2025-10-20T14:36:34.211727186Z [inf]  ✅ Converted tenant ID: "99c97d43-d075-4ebe-b719-24511cd287d6" -> 580118854 (type: number)
2025-10-20T14:36:38.621138993Z [inf]  📥 [Request] {
2025-10-20T14:36:38.621146138Z [inf]    method: 'GET',
2025-10-20T14:36:38.621150858Z [inf]    path: '/api/superadmin/tenants',
2025-10-20T14:36:38.621155980Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:36:38.621160860Z [inf]    hasAuth: true,
2025-10-20T14:36:38.621165979Z [inf]    contentType: 'application/json'
2025-10-20T14:36:38.621171052Z [inf]  }
2025-10-20T14:36:38.622913506Z [inf]  Fetching tenants for user: a8b36994-723d-45b8-a5bc-d7eea4f2bc18
2025-10-20T14:36:38.625059291Z [inf]  Database connection verified for tenants
2025-10-20T14:36:38.633700787Z [inf]  Fetched tenants: 3
2025-10-20T14:36:38.633708869Z [inf]  ✅ Converted tenant ID: "superadmin-tenant" -> 1 (type: number)
2025-10-20T14:36:38.633715328Z [inf]  ✅ Converted tenant ID: "99c97d43-d075-4ebe-b719-24511cd287d6" -> 580118854 (type: number)
2025-10-20T14:36:38.633728670Z [inf]  ✅ Converted tenant ID: "1ce32fe3-6788-44e9-82c5-fb799a0501ab" -> 484650980 (type: number)
2025-10-20T14:36:48.608216609Z [inf]    contentType: 'none'
2025-10-20T14:36:48.608234105Z [inf]  }
2025-10-20T14:36:48.608257514Z [inf]  📥 [Request] {
2025-10-20T14:36:48.608265664Z [inf]    method: 'GET',
2025-10-20T14:36:48.608280534Z [inf]    path: '/api/demo/requests',
2025-10-20T14:36:48.608293079Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:36:48.608299667Z [inf]    hasAuth: true,
2025-10-20T14:37:08.149967681Z [inf]  📥 [Request] {
2025-10-20T14:37:08.149974885Z [inf]    method: 'GET',
2025-10-20T14:37:08.149981762Z [inf]    path: '/api/superadmin/analytics/api',
2025-10-20T14:37:08.149987868Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:08.149994375Z [inf]    hasAuth: true,
2025-10-20T14:37:08.150001172Z [inf]    contentType: 'application/json'
2025-10-20T14:37:08.150007303Z [inf]  }
2025-10-20T14:37:08.150013151Z [inf]  📥 [Request] {
2025-10-20T14:37:08.150018832Z [inf]    method: 'GET',
2025-10-20T14:37:08.150024510Z [inf]    path: '/api/superadmin/analytics/usage',
2025-10-20T14:37:08.150031794Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:08.150046462Z [inf]    hasAuth: true,
2025-10-20T14:37:08.150052793Z [inf]    contentType: 'application/json'
2025-10-20T14:37:08.150058169Z [inf]  }
2025-10-20T14:37:08.150065500Z [inf]  📥 [Request] {
2025-10-20T14:37:08.150071164Z [inf]    method: 'GET',
2025-10-20T14:37:08.150076691Z [inf]    path: '/api/superadmin/analytics/agents',
2025-10-20T14:37:08.150081948Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:08.150087108Z [inf]    hasAuth: true,
2025-10-20T14:37:08.150092413Z [inf]    contentType: 'application/json'
2025-10-20T14:37:08.150097822Z [inf]  }
2025-10-20T14:37:08.150103688Z [inf]  📥 [Request] {
2025-10-20T14:37:08.150109679Z [inf]    method: 'GET',
2025-10-20T14:37:08.150115774Z [inf]    path: '/api/superadmin/analytics/performance',
2025-10-20T14:37:08.150121955Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:08.150127494Z [inf]    hasAuth: true,
2025-10-20T14:37:08.150133461Z [inf]    contentType: 'application/json'
2025-10-20T14:37:08.150139923Z [inf]  }
2025-10-20T14:37:08.150145636Z [inf]  ✅ Database connection established
2025-10-20T14:37:10.797626916Z [inf]  }
2025-10-20T14:37:10.797638562Z [inf]  📥 [Request] {
2025-10-20T14:37:10.797646217Z [inf]    method: 'GET',
2025-10-20T14:37:10.797652756Z [inf]    path: '/api/superadmin/analytics/agents',
2025-10-20T14:37:10.797660762Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:10.797667727Z [inf]    hasAuth: true,
2025-10-20T14:37:10.797674250Z [inf]    contentType: 'application/json'
2025-10-20T14:37:10.797677631Z [inf]  📥 [Request] {
2025-10-20T14:37:10.797682413Z [inf]    method: 'GET',
2025-10-20T14:37:10.797687083Z [inf]  }
2025-10-20T14:37:10.797687859Z [inf]    path: '/api/superadmin/analytics/usage',
2025-10-20T14:37:10.797692803Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:10.797697822Z [inf]    hasAuth: true,
2025-10-20T14:37:10.797702638Z [inf]    contentType: 'application/json'
2025-10-20T14:37:10.797708657Z [inf]  }
2025-10-20T14:37:10.797714071Z [inf]  📥 [Request] {
2025-10-20T14:37:10.797718513Z [inf]    method: 'GET',
2025-10-20T14:37:10.797722344Z [inf]    path: '/api/superadmin/analytics/api',
2025-10-20T14:37:10.797727298Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:10.797731592Z [inf]    hasAuth: true,
2025-10-20T14:37:10.797736340Z [inf]    contentType: 'application/json'
2025-10-20T14:37:10.797741285Z [inf]  }
2025-10-20T14:37:10.797747702Z [inf]  📥 [Request] {
2025-10-20T14:37:10.797751835Z [inf]    method: 'GET',
2025-10-20T14:37:10.797757056Z [inf]    path: '/api/superadmin/analytics/performance',
2025-10-20T14:37:10.797762287Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:10.797766695Z [inf]    hasAuth: true,
2025-10-20T14:37:10.797770860Z [inf]    contentType: 'application/json'
2025-10-20T14:37:17.833250457Z [inf]  📥 [Request] {
2025-10-20T14:37:17.833256370Z [inf]    method: 'GET',
2025-10-20T14:37:17.833262231Z [inf]    path: '/api/superadmin/tenants',
2025-10-20T14:37:17.833268173Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:17.833274150Z [inf]    hasAuth: true,
2025-10-20T14:37:17.833280437Z [inf]    contentType: 'application/json'
2025-10-20T14:37:17.833286670Z [inf]  }
2025-10-20T14:37:17.833292853Z [inf]  Fetching tenants for user: a8b36994-723d-45b8-a5bc-d7eea4f2bc18
2025-10-20T14:37:17.833299570Z [inf]  Database connection verified for tenants
2025-10-20T14:37:17.833305917Z [inf]  Fetched tenants: 3
2025-10-20T14:37:17.833312036Z [inf]  ✅ Converted tenant ID: "1ce32fe3-6788-44e9-82c5-fb799a0501ab" -> 484650980 (type: number)
2025-10-20T14:37:17.833319839Z [inf]  ✅ Converted tenant ID: "99c97d43-d075-4ebe-b719-24511cd287d6" -> 580118854 (type: number)
2025-10-20T14:37:17.833325871Z [inf]  ✅ Converted tenant ID: "superadmin-tenant" -> 1 (type: number)
2025-10-20T14:37:37.481960635Z [inf]  📥 [Request] {
2025-10-20T14:37:37.481974570Z [inf]    method: 'POST',
2025-10-20T14:37:37.481983601Z [inf]    path: '/api/upload/org-chart',
2025-10-20T14:37:37.481991561Z [inf]    origin: 'https://www.mizan.work',
2025-10-20T14:37:37.481998858Z [inf]    hasAuth: true,
2025-10-20T14:37:37.482007559Z [inf]    contentType: 'multipart/form-data; boundary=----WebKitFormBoundarymgIS4AWvPwXYBwRu'
2025-10-20T14:37:37.482015022Z [inf]  }
2025-10-20T14:37:41.038271959Z [inf]  📤 Database connection removed from pool
2025-10-20T14:37:48.061189486Z [inf]  📤 Database connection removed from pool
2025-10-20T14:37:48.061195553Z [inf]  📤 Database connection removed from pool
2025-10-20T14:37:48.180818059Z [err]  Provider gemini confidence too low: 0.7
2025-10-20T14:37:50.668989033Z [err]  Provider openai confidence too low: 0.7
2025-10-20T14:37:56.234411744Z [err]  Provider mistral confidence too low: 0.7999999999999999
2025-10-20T14:38:00.483630202Z [inf]  📤 Database connection removed from pool
2025-10-20T14:38:20.535370916Z [err]  Provider anthropic confidence too low: 0.7
2025-10-20T14:38:40.208904046Z [err]      at async handleOrgChartUpload (/app/dist/src/routes/upload.js:375:24)
2025-10-20T14:38:40.208909575Z [err]  Failed to parse knowledge output: SyntaxError: Unexpected non-whitespace character after JSON at position 1837
2025-10-20T14:38:40.208916803Z [err]      at JSON.parse (<anonymous>)
2025-10-20T14:38:40.208919026Z [err]  Raw response: ```json
2025-10-20T14:38:40.208924929Z [err]      at StructureAgent.parseKnowledgeOutput (/app/dist/src/services/agents/structure-agent.js:463:25)
2025-10-20T14:38:40.208929974Z [err]  {
2025-10-20T14:38:40.208932620Z [err]      at StructureAgent.runKnowledgeEngine (/app/dist/src/services/agents/base/three-engine-agent.js:69:26)
2025-10-20T14:38:40.208940324Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-10-20T14:38:40.208946564Z [err]      at async StructureAgent.analyze (/app/dist/src/services/agents/base/three-engine-agent.js:33:37)
2025-10-20T14:38:40.208946843Z [err]    "applicable_frameworks": [
2025-10-20T14:38:40.208955274Z [err]      "galbraithStar",
2025-10-20T14:38:40.208956513Z [err]      at async StructureAgent.analyzeOrganizationStructure (/app/dist/src/services/agents/structure-agent.js:36:24)
2025-10-20T14:38:40.208964666Z [err]      "chandlerPrinciple",
2025-10-20T14:38:40.208969784Z [err]      "milesSnow",
2025-10-20T14:38:40.208975628Z [err]      "mckinsey7S",
2025-10-20T14:38:40.208980000Z [err]      "mintzbergTypes",
2025-10-20T14:38:40.208986430Z [err]      "spanGuidelines",
2025-10-20T14:38:40.208990993Z [err]      "layerGuidelines",
2025-10-20T14:38:40.208997357Z [inf]      "decisionRights"
2025-10-20T14:38:40.209002048Z [err]    ],
2025-10-20T14:38:40.209008403Z [err]    "strategy_structure_fit": {
2025-10-20T14:38:40.209016337Z [err]      "chandlerPrinciple": "Evaluate if the current structure aligns with the organization's strategic focus. If the strategy emphasizes innovation, consider a matrix or flat structure. For efficiency, a hierarchical structure may be more suitable.",
2025-10-20T14:38:40.212269777Z [err]      "milesSnow": "Identify the strategic type (Defender, Prospector, Analyzer) and ensure the structure matches. For example, a Prospector strategy requires a decentralized, flat structure.",
2025-10-20T14:38:40.212283990Z [err]      "galbraithStar": "Ensure alignment across all dimensions: Strategy, Structure, Processes, Rewards, and People. Misalignment in any dimension can hinder strategy execution."
2025-10-20T14:38:40.212291599Z [err]    },
2025-10-20T14:38:40.212297787Z [err]    "misalignment_risks": {
2025-10-20T14:38:40.212305872Z [err]      "mckinsey7S": "Structure alone cannot resolve misalignment. Ensure all 7 elements (Strategy, Structure, Systems, Shared Values, Style, Staff, Skills) are aligned to prevent execution risks.",
2025-10-20T14:38:40.212313441Z [err]      "layerGuidelines": "Excessive layers can slow decision-making and dilute strategy communication. Ensure the number of layers is appropriate for the organization's size.",
2025-10-20T14:38:40.212322689Z [err]      "spanGuidelines": "Inappropriate spans of control can lead to inefficiencies. Ensure spans are optimal for the level of oversight required."
2025-10-20T14:38:40.212330013Z [err]    },
2025-10-20T14:38:40.212336078Z [err]    "optimal_patterns": {
2025-10-20T14:38:40.212347845Z [err]      "mintzbergTypes": "Consider the organizational configuration that best fits the strategy. For innovation, an Adhocracy or Simple Structure may be ideal. For efficiency, a Machine Bureaucracy might be more appropriate.",
2025-10-20T14:38:40.212354190Z [err]      "decisionRights": "Clarify decision rights to prevent bottlenecks. Decisions should be made at the lowest competent level, with strategic decisions escalated appropriately."
2025-10-20T14:38:40.212359691Z [err]    }
2025-10-20T14:38:40.212368204Z [err]  }
2025-10-20T14:38:40.212374858Z [err]  ```
2025-10-20T14:38:40.212382298Z [err]  
2025-10-20T14:38:40.212388577Z [err]  ### Explanation:
2025-10-20T14:38:40.214693082Z [err]  
2025-10-20T14:38:40.214704723Z [err]  1. **Applicable Frameworks**: The frameworks listed are relevant for analyzing the organization's structure in relation to its strategy. Each framework provides a different lens through which to assess alignment and potential misalignments.
2025-10-20T14:38:40.214712077Z [err]  
2025-10-20T14:38:40.214717496Z [err]  2. **Strategy-Structure Fit**: 
2025-10-20T14:38:40.214723313Z [err]     - **Chandler's Principle** emphasizes the need for the structure to follow the strategy. If the strategy changes, the structure must adapt accordingly.
2025-10-20T14:38:40.214729161Z [err]     - **Miles & Snow** helps identify the strategic type and align the structure to support it.
2025-10-20T14:38:40.214735034Z [err]     - **Galbraith Star Model** stresses the importance of aligning all organizational dimensions to support the strategy.
2025-10-20T14:38:40.214742806Z [err]  
2025-10-20T14:38:40.214748448Z [err]  3. **Misalignment Risks**:
2025-10-20T14:38:40.214755100Z [err]     - **McKinsey 7S** highlights that structure alone cannot fix misalignment; all elements must be in harmony.
2025-10-20T14:38:40.214761835Z [err]     - **Layer Guidelines** warn against too many organizational layers, which can impede communication and decision-making.
2025-10-20T14:38:40.214767366Z [err]     - **Span Guidelines** ensure that spans of control are optimal for effective management and oversight.
2025-10-20T14:38:40.214773523Z [err]  
2025-10-20T14:38:40.214778531Z [err]  4. **Optimal Patterns**:
2025-10-20T14:38:40.214783804Z [err]     - **Mintzberg Configurations** suggest choosing a structural archetype that fits the strategic needs, whether it be innovation or efficiency.
2025-10-20T14:38:40.214789175Z [err]     - **Decision Rights** emphasize the importance of clear decision-making authority to facilitate strategy execution and prevent bottlenecks.
2025-10-20T14:38:40.214795344Z [inf]  ✅ Database connection established
2025-10-20T14:38:40.216670836Z [err]  structure analysis failed: Error: No organization structure found for tenant
2025-10-20T14:38:40.216682746Z [err]      at StructureAgent.processData (/app/dist/src/services/agents/structure-agent.js:311:19)
2025-10-20T14:38:40.216689756Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-10-20T14:38:40.216695873Z [err]      at async StructureAgent.runDataEngine (/app/dist/src/services/agents/base/three-engine-agent.js:77:31)
2025-10-20T14:38:40.216701082Z [err]      at async StructureAgent.analyze (/app/dist/src/services/agents/base/three-engine-agent.js:34:32)
2025-10-20T14:38:40.216708103Z [err]      at async StructureAgent.analyzeOrganizationStructure (/app/dist/src/services/agents/structure-agent.js:36:24)
2025-10-20T14:38:40.216713297Z [err]      at async handleOrgChartUpload (/app/dist/src/routes/upload.js:375:24)
2025-10-20T14:38:40.216719588Z [err]  Save org structure failed: Error: No organization structure found for tenant
2025-10-20T14:38:40.216725254Z [err]      at StructureAgent.processData (/app/dist/src/services/agents/structure-agent.js:311:19)
2025-10-20T14:38:40.216732117Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-10-20T14:38:40.216737611Z [err]      at async StructureAgent.runDataEngine (/app/dist/src/services/agents/base/three-engine-agent.js:77:31)
2025-10-20T14:38:40.216743235Z [err]      at async StructureAgent.analyze (/app/dist/src/services/agents/base/three-engine-agent.js:34:32)
2025-10-20T14:38:40.216749064Z [err]      at async StructureAgent.analyzeOrganizationStructure (/app/dist/src/services/agents/structure-agent.js:36:24)
2025-10-20T14:38:40.216754952Z [err]      at async handleOrgChartUpload (/app/dist/src/routes/upload.js:375:24)
2025-10-20T14:38:40.216760359Z [err]  Error stack: Error: No organization structure found for tenant
2025-10-20T14:38:40.216766829Z [err]      at StructureAgent.processData (/app/dist/src/services/agents/structure-agent.js:311:19)
2025-10-20T14:38:40.218171119Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-10-20T14:38:40.218181478Z [err]      at async StructureAgent.runDataEngine (/app/dist/src/services/agents/base/three-engine-agent.js:77:31)
2025-10-20T14:38:40.218189879Z [err]      at async StructureAgent.analyze (/app/dist/src/services/agents/base/three-engine-agent.js:34:32)
2025-10-20T14:38:40.218196992Z [err]      at async StructureAgent.analyzeOrganizationStructure (/app/dist/src/services/agents/structure-agent.js:36:24)
2025-10-20T14:38:40.218202796Z [err]      at async handleOrgChartUpload (/app/dist/src/routes/upload.js:375:24)

