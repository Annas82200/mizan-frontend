2025-11-05T08:05:31.000000000Z [inf]  Starting Container
2025-11-05T08:05:32.598062325Z [inf]  ğŸ—„ï¸  Database: Connected
2025-11-05T08:05:32.598071816Z [inf]  ğŸ¤– AI Providers: OpenAI, Anthropic, Google, Mistral
2025-11-05T08:05:32.598082051Z [inf]  
2025-11-05T08:05:32.598120317Z [inf]  ğŸ”„ Deployment Version: 1a92068
2025-11-05T08:05:32.598127798Z [inf]  ========================================
2025-11-05T08:05:32.598131300Z [inf]  ========================================
2025-11-05T08:05:32.598135826Z [inf]  ğŸš€ Mizan Server Process Starting...
2025-11-05T08:05:32.598142697Z [inf]  âš™ï¸  Environment variables ready (injected by platform)
2025-11-05T08:05:32.598144040Z [inf]  ğŸ“… Timestamp: 2025-11-05T08:05:32.036Z
2025-11-05T08:05:32.598149780Z [inf]  ğŸ“š Loading database module...
2025-11-05T08:05:32.598153610Z [inf]  ğŸŒ Node Version: v20.19.5
2025-11-05T08:05:32.598157333Z [inf]  âœ… Configuration validated successfully
2025-11-05T08:05:32.598162765Z [inf]  ğŸ“¦ Environment: production
2025-11-05T08:05:32.598165419Z [inf]  ğŸ“ Environment: production
2025-11-05T08:05:32.598172372Z [inf]  ğŸ”Œ Port: 8080
2025-11-05T08:05:33.654688391Z [inf]  âœ… Database module loaded
2025-11-05T08:05:33.654693485Z [inf]  ğŸ’¡ Configured Port: 8080
2025-11-05T08:05:33.654700841Z [inf]  ğŸ’¡ Configured Host: 0.0.0.0
2025-11-05T08:05:33.654706693Z [inf]  ğŸŒ CORS configured with dynamic origin checking
2025-11-05T08:05:33.654711298Z [inf]  âœ… Allowed origins (static): [
2025-11-05T08:05:33.654717603Z [inf]    'http://localhost:3000',
2025-11-05T08:05:33.654722400Z [inf]    'http://localhost:3001',
2025-11-05T08:05:33.654729162Z [inf]    'https://mizan.work',
2025-11-05T08:05:33.654733881Z [inf]    'https://www.mizan.work',
2025-11-05T08:05:33.654824923Z [inf]  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2025-11-05T08:05:33.654827958Z [inf]  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2025-11-05T08:05:33.654838606Z [inf]  ğŸš€ STARTING MIZAN PLATFORM SERVER v2.0.0
2025-11-05T08:05:33.654849901Z [inf]  ğŸ“ Environment: production
2025-11-05T08:05:33.654909391Z [inf]    'https://api.mizan.work',
2025-11-05T08:05:33.654918477Z [inf]    'https://mizan-platform-final.vercel.app',
2025-11-05T08:05:33.654924908Z [inf]  ğŸ”§ FRONTEND_URL environment variable: https://mizan.work
2025-11-05T08:05:33.654929602Z [inf]    'https://mizan-frontend-ten.vercel.app',
2025-11-05T08:05:33.654932585Z [inf]  âœ… Dynamic patterns: *.vercel.app, *.railway.app
2025-11-05T08:05:33.654932906Z [inf]  ğŸ¬ Invoking startServer() function...
2025-11-05T08:05:33.654936894Z [inf]    'https://mizan-api.railway.app'
2025-11-05T08:05:33.654942538Z [inf]  
2025-11-05T08:05:33.654942943Z [inf]  ğŸ”§ CLIENT_URL environment variable: https://mizan.work
2025-11-05T08:05:33.654943544Z [inf]  ]
2025-11-05T08:05:33.658162709Z [inf]  ğŸ”Œ Port: 8080
2025-11-05T08:05:33.658169123Z [inf]  ğŸ–¥ï¸  Host: 0.0.0.0
2025-11-05T08:05:33.658174363Z [inf]  
2025-11-05T08:05:33.658183746Z [inf]  ğŸ” Security Configuration:
2025-11-05T08:05:33.658192893Z [inf]    âœ… DATABASE_URL is configured
2025-11-05T08:05:33.658208925Z [inf]    âœ… JWT/SESSION_SECRET is configured
2025-11-05T08:05:33.658209857Z [inf]  ğŸ” Database connection attempt 1/2...
2025-11-05T08:05:33.658222249Z [inf]  ğŸ” Testing database connection...
2025-11-05T08:05:33.658224482Z [inf]  
2025-11-05T08:05:33.658229690Z [inf]  ğŸŒ Server: http://0.0.0.0:8080
2025-11-05T08:05:33.658232679Z [inf]  
2025-11-05T08:05:33.658240316Z [inf]  ğŸ¥ Health: http://0.0.0.0:8080/health
2025-11-05T08:05:33.658242902Z [inf]  ğŸŒ Starting HTTP server...
2025-11-05T08:05:33.658243533Z [inf]  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2025-11-05T08:05:33.658249660Z [inf]  ğŸ“Š Features: Three-Engine AI, Multi-Provider Consensus
2025-11-05T08:05:33.658255664Z [inf]  âœ… MIZAN PLATFORM SERVER ONLINE
2025-11-05T08:05:33.658258122Z [inf]     Binding to: 0.0.0.0:8080
2025-11-05T08:05:33.658260806Z [inf]  ğŸ”’ Security: CORS, Helmet, Rate Limiting
2025-11-05T08:05:33.658266092Z [inf]  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2025-11-05T08:05:33.658268736Z [inf]  ğŸ—„ï¸  Database: Testing connection in background...
2025-11-05T08:05:33.658275971Z [inf]  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2025-11-05T08:05:33.658281447Z [inf]  
2025-11-05T08:05:33.658286359Z [inf]  âœ… startServer() invocation completed successfully
2025-11-05T08:05:33.661668898Z [inf]  ğŸ¥ Health check requested. Reporting current status:
2025-11-05T08:05:33.661684693Z [inf]    - Server Status: running
2025-11-05T08:05:33.661689983Z [inf]    - Database Status: disconnected
2025-11-05T08:05:33.661695158Z [inf]    - DATABASE_URL: Set (hidden)
2025-11-05T08:05:33.661703540Z [inf]  âœ… Database connection established
2025-11-05T08:05:33.661713725Z [inf]  âœ… Database connection established
2025-11-05T08:05:33.661718552Z [inf]  âœ… Database connection successful
2025-11-05T08:05:33.661722860Z [inf]  âœ… Database fully connected and operational
2025-11-05T08:05:33.661727721Z [inf]  âœ… Database connection validated successfully
2025-11-05T08:06:13.154882234Z [inf]  ğŸ“¤ Database connection removed from pool
2025-11-05T08:06:13.154889087Z [inf]  ğŸ“¤ Database connection removed from pool
2025-11-05T08:06:33.229413856Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:33.229424797Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:33.229425415Z [inf]    hasAuth: true,
2025-11-05T08:06:33.229442733Z [inf]    method: 'GET',
2025-11-05T08:06:33.229451620Z [inf]    path: '/api/auth/me',
2025-11-05T08:06:33.229514991Z [inf]    contentType: 'application/json'
2025-11-05T08:06:33.229527887Z [inf]  }
2025-11-05T08:06:33.229537913Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:33.229544380Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:33.229557154Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:33.229562474Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:06:33.229566494Z [inf]  âœ… Database connection established
2025-11-05T08:06:33.229572088Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:33.229576814Z [inf]    method: 'GET',
2025-11-05T08:06:33.229581711Z [inf]    path: '/api/auth/me',
2025-11-05T08:06:33.229586448Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:33.229591709Z [inf]    hasAuth: true,
2025-11-05T08:06:33.229598121Z [inf]    contentType: 'application/json'
2025-11-05T08:06:33.229660117Z [inf]  }
2025-11-05T08:06:33.229668367Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:33.229685420Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:33.229695683Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:33.229702384Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:06:33.229709019Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:33.229960140Z [inf]    method: 'GET',
2025-11-05T08:06:33.229972212Z [inf]    path: '/api/superadmin/tenants',
2025-11-05T08:06:33.229979566Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:33.229987575Z [inf]    hasAuth: true,
2025-11-05T08:06:33.229997033Z [inf]    contentType: 'application/json'
2025-11-05T08:06:33.232215357Z [inf]  }
2025-11-05T08:06:33.232222080Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:33.232228825Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:33.232235470Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:33.232242129Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:06:33.232248938Z [inf]  Fetching tenants for user: a8b36994-723d-45b8-a5bc-d7eea4f2bc18
2025-11-05T08:06:33.232256142Z [inf]  Database connection verified for tenants
2025-11-05T08:06:33.232262082Z [inf]  Fetched tenants: 3
2025-11-05T08:06:33.232268154Z [inf]  âœ… Database connection established
2025-11-05T08:06:33.232274121Z [inf]  âœ… Database connection established
2025-11-05T08:06:33.232280820Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:33.232288537Z [inf]    method: 'GET',
2025-11-05T08:06:33.232294134Z [inf]    path: '/api/skills/dashboard/stats',
2025-11-05T08:06:33.232301168Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:33.232307058Z [inf]    hasAuth: true,
2025-11-05T08:06:33.232312636Z [inf]    contentType: 'application/json'
2025-11-05T08:06:33.232318127Z [inf]  }
2025-11-05T08:06:33.232324683Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:33.232330536Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:33.232336733Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:33.232342707Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:06:33.788880331Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:33.788885219Z [inf]    method: 'GET',
2025-11-05T08:06:33.788889999Z [inf]    path: '/api/admin/employees',
2025-11-05T08:06:33.788895496Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:33.788900838Z [inf]    hasAuth: true,
2025-11-05T08:06:33.788908392Z [inf]    contentType: 'application/json'
2025-11-05T08:06:33.788914986Z [inf]  }
2025-11-05T08:06:33.788921980Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:33.788928366Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:33.788934631Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:33.788940501Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:06:35.776657648Z [inf]    hasAuth: true,
2025-11-05T08:06:35.776670337Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:35.776673804Z [inf]    contentType: 'application/json'
2025-11-05T08:06:35.776678962Z [inf]    method: 'GET',
2025-11-05T08:06:35.776687353Z [inf]  }
2025-11-05T08:06:35.776691116Z [inf]    path: '/api/skills/employee/e5bbdc20-9681-407b-9018-e2c09a5ffeaf',
2025-11-05T08:06:35.776699161Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:35.776705167Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:35.776707049Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:35.776718074Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:35.776719447Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:06:41.924334022Z [inf]  ğŸ“¥ [Request] {
2025-11-05T08:06:41.924350151Z [inf]    method: 'POST',
2025-11-05T08:06:41.924358405Z [inf]    path: '/api/skills/resume/upload',
2025-11-05T08:06:41.924365220Z [inf]    origin: 'https://www.mizan.work',
2025-11-05T08:06:41.924371303Z [inf]    hasAuth: true,
2025-11-05T08:06:41.924379069Z [inf]    contentType: 'multipart/form-data; boundary=----WebKitFormBoundaryCi8rUoj0kEx6FDlM'
2025-11-05T08:06:41.924386357Z [inf]  }
2025-11-05T08:06:41.926272925Z [inf]  [AUTH] Cookies received: []
2025-11-05T08:06:41.926285064Z [inf]  [AUTH] mizan_auth_token cookie: MISSING
2025-11-05T08:06:41.926294794Z [inf]  [AUTH] Authorization header: PRESENT
2025-11-05T08:06:41.926304213Z [inf]  [AUTH] Token source: Authorization header
2025-11-05T08:07:01.520233632Z [err]  Provider openai confidence too low: 0.7999999999999999 {
2025-11-05T08:07:01.520240784Z [err]    threshold: 0.8,
2025-11-05T08:07:01.520246669Z [err]    agent: 'skills',
2025-11-05T08:07:01.520252765Z [err]    agent_specific_threshold: false,
2025-11-05T08:07:01.520257826Z [err]    actual_confidence: 0.7999999999999999,
2025-11-05T08:07:01.520263370Z [err]    prompt_length: 7116,
2025-11-05T08:07:01.520268597Z [err]    response_length: 2829,
2025-11-05T08:07:01.520273983Z [err]    timestamp: '2025-11-05T08:06:53.571Z',
2025-11-05T08:07:01.520279238Z [err]    engine: 'data'
2025-11-05T08:07:01.520285152Z [err]  }
2025-11-05T08:07:01.520290120Z [err]  Gemini invocation failed: Error: Gemini returned empty content
2025-11-05T08:07:01.520295304Z [err]      at AIProviderRouter.invokeGemini (/app/dist/src/services/ai-providers/router.js:181:23)
2025-11-05T08:07:01.520299754Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-11-05T08:07:01.520304952Z [err]      at async EnsembleAI.callProviderSafely (/app/dist/src/services/ai-providers/ensemble.js:57:30)
2025-11-05T08:07:01.520311000Z [err]      at async Promise.all (index 2)
2025-11-05T08:07:01.520315852Z [err]      at async EnsembleAI.call (/app/dist/src/services/ai-providers/ensemble.js:26:27)
2025-11-05T08:07:01.520322393Z [err]      at async SkillsAgent.extractSkillsFromResume (/app/dist/src/services/agents/skills/skills-agent.js:927:30)
2025-11-05T08:07:01.520329004Z [err]      at async /app/dist/src/routes/skills.js:160:33
2025-11-05T08:07:01.520335774Z [err]  Provider gemini failed: Error: Gemini returned empty content
2025-11-05T08:07:01.520341687Z [err]      at AIProviderRouter.invokeGemini (/app/dist/src/services/ai-providers/router.js:181:23)
2025-11-05T08:07:01.520348143Z [err]      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-11-05T08:07:01.526018687Z [err]      at async EnsembleAI.callProviderSafely (/app/dist/src/services/ai-providers/ensemble.js:57:30)
2025-11-05T08:07:01.526027194Z [err]      at async Promise.all (index 2)
2025-11-05T08:07:01.526034604Z [err]      at async EnsembleAI.call (/app/dist/src/services/ai-providers/ensemble.js:26:27)
2025-11-05T08:07:01.526042256Z [err]      at async SkillsAgent.extractSkillsFromResume (/app/dist/src/services/agents/skills/skills-agent.js:927:30)
2025-11-05T08:07:01.526050211Z [err]      at async /app/dist/src/routes/skills.js:160:33
2025-11-05T08:07:01.526057594Z [inf]  ğŸ“¤ Database connection removed from pool
2025-11-05T08:07:01.526065099Z [inf]  ğŸ“¤ Database connection removed from pool
2025-11-05T08:07:21.532757108Z [inf]  ğŸ“¤ Database connection removed from pool
2025-11-05T08:08:01.530076386Z [inf]  âœ… Database connection established